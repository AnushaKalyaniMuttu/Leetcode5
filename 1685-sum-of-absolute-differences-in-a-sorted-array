class Solution {
    public int[] getSumAbsoluteDifferences(int[] nums) {
        int n = nums.length;
        int[] result = new int[n];
        long totalSum = 0;     // sum of all nums
        long prefixSum = 0;    // sum of nums[0..i-1] as we go

        for (int x : nums) {
            totalSum += x;
        }

        for (int i = 0; i < n; i++) {
            long x = nums[i];
            // sum of differences with all left elements
            long leftPart = x * i - prefixSum;
            // sum of differences with all right elements
            long rightPart = (totalSum - prefixSum - x) - x * (n - i - 1);

            result[i] = (int)(leftPart + rightPart);

            // update prefix sum for next iteration
            prefixSum += x;
        }

        return result;
    }
}
